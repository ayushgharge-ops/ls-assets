<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuous Creative Loop Display</title>
    
    <!-- Load Tailwind CSS from CDN for modern, responsive styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Use Inter font for a professional look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            margin: 0;
            overflow: hidden;
        }

        /* Container for the single creative frame */
        .creative-frame {
            position: relative;
            width: 100%;
            max-width: 400px; /* Frame size */
            aspect-ratio: 1 / 1; /* Perfect square aspect ratio */
            overflow: hidden;
            border-radius: 1rem; 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); 
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
        }

        /* Styles for media elements */
        .creative-media {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            opacity: 0; 
            transition: opacity 0.6s ease-in-out; 
            display: none; 
        }

        /* Class to make the current media visible and active */
        .active {
            opacity: 1 !important;
            display: block;
        }
        
        /* Loading spinner */
        .loader {
            border: 4px solid #f3f3f3; 
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -20px;
            margin-left: -20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="creative-frame">
        <div id="media-container" class="w-full h-full relative">
            <div id="loader" class="loader"></div> 
            
            <!-- Image element for JPEGs, PNGs, and GIFs -->
            <img id="creativeImage" class="creative-media" src="" alt="Campaign Creative Loop" onerror="handleError(this)">
            
            <!-- Video element for MP4 files (autoplay, loop, muted) -->
            <video id="creativeVideo" class="creative-media" muted loop autoplay playsinline src="" alt="Campaign Video Loop" onerror="handleError(this)"></video>
            
            <!-- Fallback message -->
            <div id="error-message" class="absolute inset-0 flex items-center justify-center bg-white text-red-600 p-4 hidden"></div>
        </div>
    </div>

    <script>
        // --- Configuration ---
        
        // V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V
        // CRITICAL: These are the files found in your uploads. 
        // If it's still blank, you MUST check these names against your hosting service (GitHub/etc.).
        // V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V V
        const creativeUrls = [
            'Hindi Creative.jfif',      // New file added
            'Tamil Creative.gif',       // New file added
            'Telugu Creative.jfif',     // New file added
             
        ];

        const displayDuration = 4000; // Time in milliseconds (4 seconds) for each creative
        const transitionDuration = 600; // Time in milliseconds for the fade 

        let currentIndex = 0;
        let intervalId = null;

        const creativeImage = document.getElementById('creativeImage');
        const creativeVideo = document.getElementById('creativeVideo');
        const errorMessage = document.getElementById('error-message');
        const loader = document.getElementById('loader');

        // Global function called when a media file fails to load (404 error)
        window.handleError = function(element) {
            console.error(`CRITICAL: Failed to load: ${element.src}. Check file name and path!`);
            loader.style.display = 'none';
            clearInterval(intervalId);
            errorMessage.textContent = `CRITICAL ERROR: File not found: ${element.src.split('/').pop()}. Please check file names in the 'creativeUrls' list.`;
            errorMessage.classList.remove('hidden');
        };
        
        /**
         * Determines media type and returns the corresponding element.
         */
        function getMediaType(url) {
            if (/\.(mp4|mov|webm)$/i.test(url)) {
                return { element: creativeVideo, type: 'video' };
            }
            // Default to image for everything else (jpg, png, gif, jfif)
            return { element: creativeImage, type: 'image' };
        }

        /**
         * Switches the creative media element to the next one in the array with a fade effect.
         */
        function cycleCreatives() {
            if (creativeUrls.length === 0) return;

            const currentUrl = creativeUrls[currentIndex];
            const { element: nextElement, type: nextType } = getMediaType(currentUrl);

            // 1. Start transition: Show loader and fade out current element
            loader.style.display = 'block';
            document.querySelectorAll('.creative-media').forEach(el => {
                el.classList.remove('active');
                if (el.tagName === 'VIDEO') { el.pause(); }
            });

            // Wait for the fade-out time 
            setTimeout(() => {
                
                // 2. Set the source for the next element
                if (nextType === 'video') {
                    creativeVideo.src = currentUrl;
                    creativeVideo.load(); 
                    // Attempt to play; it will start looping due to the 'loop' attribute
                    creativeVideo.play().catch(e => console.warn("Video autoplay blocked. It will likely play after the first interaction."));
                    creativeImage.src = ''; 
                } else {
                    creativeImage.src = currentUrl;
                    creativeVideo.pause(); 
                }
                
                // 3. Increment index for next cycle
                currentIndex = (currentIndex + 1) % creativeUrls.length;
                
                // 4. Hide loader and Fade in the new media element on load completion
                nextElement.onload = nextElement.onloadeddata = () => {
                    loader.style.display = 'none';
                    nextElement.classList.add('active');
                    // Remove listeners after use
                    nextElement.onload = null;
                    nextElement.onloadeddata = null;
                };

                // Safety check for cached images/gifs (which load instantly)
                if (nextType === 'image' && nextElement.complete) {
                    loader.style.display = 'none';
                    nextElement.classList.add('active');
                } else if (nextType === 'video') {
                    // Videos might take a moment, but we fade them in to start the loop
                    loader.style.display = 'none';
                    nextElement.classList.add('active');
                }

            }, transitionDuration);
        }
        
        /**
         * Initializes and starts the carousel.
         */
        function startCarousel() {
            if (creativeUrls.length === 0) {
                errorMessage.textContent = "Error: No Creatives Found in list.";
                errorMessage.classList.remove('hidden');
                return; 
            }
            
            // Initial call to set the very first creative
            cycleCreatives(); 

            // Set the interval to run the cycle function continuously
            intervalId = setInterval(cycleCreatives, displayDuration);
        }

        // Start the carousel when the window finishes loading
        window.onload = startCarousel;

    </script>
</body>
</html>
